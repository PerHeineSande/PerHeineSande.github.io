<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Volleyball Rotation Visualizer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        h1 {
            margin-bottom: 20px;
            color: #333;
        }

        /* Setup Modal */
        #setup-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        #setup-modal.hidden {
            display: none;
        }

        .setup-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .setup-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 30px;
        }

        .setup-header h2 {
            font-size: 32px;
            margin: 0;
        }

        .serving-team {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .serving-team label {
            font-size: 18px;
            font-weight: 500;
            color: #333;
        }

        .toggle-switch {
            position: relative;
            width: 80px;
            height: 40px;
            background: #ddd;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle-switch.active-a {
            background: #134f2a;
        }

        .toggle-switch.active-b {
            background: #1e5a96;
        }

        .toggle-slider {
            position: absolute;
            top: 4px;
            left: 4px;
            width: 32px;
            height: 32px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #333;
            font-size: 14px;
        }

        .toggle-switch.active-b .toggle-slider {
            transform: translateX(40px);
        }

        .position-table {
            margin-bottom: 30px;
        }

        .table-header {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #555;
        }

        td {
            background: white;
        }

        input[type="text"] {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .team-label {
            font-weight: 600;
            color: #134f2a;
        }

        .team-label.team-b {
            color: #1e5a96;
        }

        .start-button {
            width: 100%;
            padding: 18px;
            font-size: 18px;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .start-button:active {
            transform: translateY(0);
        }

        /* Main app container */
        #app-container {
            display: none;
        }

        #app-container.visible {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #canvas-container {
            position: relative;
            margin-bottom: 20px;
        }

        canvas {
            border: 2px solid #333;
            display: block;
        }

        .controls {
            display: flex;
            gap: 40px;
            margin-bottom: 10px;
        }

        .team-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .team-controls h3 {
            text-align: center;
            color: #333;
        }

        button {
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: #2196F3;
            color: white;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #0b7dda;
        }

        .rotate-both {
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            background-color: #4C57AF;
        }

        .rotate-both:hover {
            background-color: #3a4589;
        }
    </style>
</head>
<body>
    <!-- Setup Modal -->
    <div id="setup-modal">
        <div class="setup-container">
            <div class="setup-header">
                <h2>Oppsett</h2>
            </div>

            <div class="serving-team">
                <label>Lag som starter med serv</label>
                <div class="toggle-switch active-a" id="serving-toggle" onclick="toggleServing()">
                    <div class="toggle-slider">A</div>
                </div>
            </div>

            <div class="position-table">
                <div class="table-header">Spillere</div>
                <table>
                    <thead>
                        <tr>
                            <th>Start posisjon</th>
                            <th><span class="team-label">Lag A</span></th>
                            <th><span class="team-label team-b">Lag B</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td><input type="text" id="teamA-1" value="Kaldheim"></td>
                            <td><input type="text" id="teamB-1" value="Intrys"></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td><input type="text" id="teamA-2" value="Andersland"></td>
                            <td><input type="text" id="teamB-2" value="Barna"></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td><input type="text" id="teamA-3" value="Maaseide"></td>
                            <td><input type="text" id="teamB-3" value="Hansen"></td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td><input type="text" id="teamA-4" value="Berg"></td>
                            <td><input type="text" id="teamB-4" value="Flåskjer"></td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td><input type="text" id="teamA-5" value="Rønneberg"></td>
                            <td><input type="text" id="teamB-5" value="Harris"></td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td><input type="text" id="teamA-6" value="Risland"></td>
                            <td><input type="text" id="teamB-6" value="Sande"></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <button class="start-button" onclick="startApp()">Start</button>
        </div>
    </div>

    <!-- Main App -->
    <div id="app-container">
        <h1>Volleyball Rotation Visualizer</h1>
        
        <div id="canvas-container">
            <canvas id="court" width="1000" height="700"></canvas>
        </div>

        <div class="controls">
            <div class="team-controls">
                <h3>Team A (Green)</h3>
                <button onclick="rotateTeam('A')">Rotate Team A →</button>
                <button onclick="rotateTeamReverse('A')">Rotate Team A ←</button>
            </div>

            <div class="team-controls">
                <h3>Team B (Blue)</h3>
                <button onclick="rotateTeam('B')">Rotate Team B →</button>
                <button onclick="rotateTeamReverse('B')">Rotate Team B ←</button>
            </div>
        </div>

        <button class="rotate-both" onclick="rotateBothTeams()">Rotate Both Teams</button>
    </div>

    <script>
        // Team data
        let teamA = ["Kaldheim", "Andersland", "Maaseide", "Berg", "Rønneberg", "Risland"];
        let teamB = ["Intrys", "Barna", "Hansen", "Flåskjer", "Harris", "Sande"];
        let servingTeam = 'A';

        const canvas = document.getElementById('court');
        const ctx = canvas.getContext('2d');

        // Toggle serving team
        function toggleServing() {
            const toggle = document.getElementById('serving-toggle');
            const slider = toggle.querySelector('.toggle-slider');
            
            if (servingTeam === 'A') {
                servingTeam = 'B';
                toggle.classList.remove('active-a');
                toggle.classList.add('active-b');
                slider.textContent = 'B';
            } else {
                servingTeam = 'A';
                toggle.classList.remove('active-b');
                toggle.classList.add('active-a');
                slider.textContent = 'A';
            }
        }

        // Start the app
        function startApp() {
            // Get player names from inputs
            for (let i = 1; i <= 6; i++) {
                teamA[i-1] = document.getElementById(`teamA-${i}`).value || `Player A${i}`;
                teamB[i-1] = document.getElementById(`teamB-${i}`).value || `Player B${i}`;
            }

            // Hide setup modal and show app
            document.getElementById('setup-modal').classList.add('hidden');
            document.getElementById('app-container').classList.add('visible');

            // Draw the court
            drawCourt();
        }

        function rotateTeam(team) {
            const arr = team === 'A' ? teamA : teamB;
            const temp = [...arr];
            
            // Apply rotation pattern
            arr[1] = temp[0];  // top-left -> top-right
            arr[3] = temp[1];  // top-right -> middle-right
            arr[5] = temp[3];  // middle-right -> bottom-right
            arr[4] = temp[5];  // bottom-right -> bottom-left
            arr[2] = temp[4];  // bottom-left -> middle-left
            arr[0] = temp[2];  // middle-left -> top-left
            
            drawCourt();
        }

        function rotateTeamReverse(team) {
            const arr = team === 'A' ? teamA : teamB;
            const temp = [...arr];
            
            // Apply reverse rotation pattern
            arr[2] = temp[0];  // top-left -> middle-left
            arr[4] = temp[2];  // middle-left -> bottom-left
            arr[5] = temp[4];  // bottom-left -> bottom-right
            arr[3] = temp[5];  // bottom-right -> middle-right
            arr[1] = temp[3];  // middle-right -> top-right
            arr[0] = temp[1];  // top-right -> top-left
            
            drawCourt();
        }

        function rotateBothTeams() {
            rotateTeam('A');
            rotateTeam('B');
        }

        function drawCourt() {
            // Clear canvas
            ctx.fillStyle = '#4887c6';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Court dimensions
            const marginX = 80;
            const marginY = 100;
            const courtWidth = 840;
            const courtHeight = 420;
            const halfWidth = courtWidth / 2;

            // Draw full court
            ctx.fillStyle = '#d26337';
            ctx.fillRect(marginX, marginY, courtWidth, courtHeight);
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 4;
            ctx.strokeRect(marginX, marginY, courtWidth, courtHeight);

            // Draw center line (net)
            ctx.beginPath();
            ctx.moveTo(marginX + halfWidth, marginY);
            ctx.lineTo(marginX + halfWidth, marginY + courtHeight);
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 4;
            ctx.stroke();

            // Draw attack lines
            const attackLineOffset = halfWidth / 1.6;
            
            ctx.beginPath();
            ctx.moveTo(marginX + attackLineOffset, marginY);
            ctx.lineTo(marginX + attackLineOffset, marginY + courtHeight);
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 3;
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(marginX + courtWidth - attackLineOffset, marginY);
            ctx.lineTo(marginX + courtWidth - attackLineOffset, marginY + courtHeight);
            ctx.stroke();

            // Draw net
            const netHeight = 120;
            const netX = marginX + halfWidth;
            const netTop = marginY - netHeight;

            // Net poles and bases
            ctx.fillStyle = '#2d2d2d';
            ctx.fillRect(netX - 4, netTop, 8, netHeight);
            ctx.fillRect(netX - 4, marginY + courtHeight, 8, netHeight);

            ctx.fillStyle = '#4a4a4a';
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 1;
            
            ctx.beginPath();
            ctx.ellipse(netX, netTop - 7.5, 8, 7.5, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();

            ctx.beginPath();
            ctx.ellipse(netX, marginY + courtHeight + netHeight + 7.5, 8, 7.5, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();

            // Net mesh
            ctx.strokeStyle = '#1a1a1a';
            ctx.lineWidth = 1;
            for (let i = netTop; i < marginY + courtHeight; i += 10) {
                ctx.beginPath();
                ctx.moveTo(netX - 2, i);
                ctx.lineTo(netX + 2, i + 5);
                ctx.stroke();
            }

            // Draw teams
            const zoneHeight = courtHeight / 3;
            drawTeam(teamA, marginX, marginY, zoneHeight, true);
            drawTeam(teamB, marginX + halfWidth, marginY, zoneHeight, false);
        }

        function drawTeam(team, startX, startY, zoneHeight, leftSide) {
            const zoneWidth = 420 / 2;
            
            const positions = [
                [startX + zoneWidth * 0.5, startY + zoneHeight * 0.5],
                [startX + zoneWidth * 1.5, startY + zoneHeight * 0.5],
                [startX + zoneWidth * 0.5, startY + zoneHeight * 1.5],
                [startX + zoneWidth * 1.5, startY + zoneHeight * 1.5],
                [startX + zoneWidth * 0.5, startY + zoneHeight * 2.5],
                [startX + zoneWidth * 1.5, startY + zoneHeight * 2.5]
            ];

            const color = leftSide ? '#134f2a' : '#1e5a96';

            // Draw players
            for (let i = 0; i < positions.length; i++) {
                const [x, y] = positions[i];
                
                // Draw circle
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.arc(x, y, 35, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 3;
                ctx.stroke();

                // Draw text
                ctx.fillStyle = 'white';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(team[i], x, y);
            }
        }

        // Initial draw
        drawCourt();
    </script>
</body>
</html>
